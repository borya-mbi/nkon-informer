# üöÄ –†–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –Ω–∞ Proxmox

–î–µ—Ç–∞–ª—å–Ω–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –∑ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è NKON Monitor –Ω–∞ Proxmox —Å–µ—Ä–≤–µ—Ä—ñ.

## üìä –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–∏–π –≤–∞—Ä—ñ–∞–Ω—Ç: LXC –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

> [!IMPORTANT]
> **–†–µ–∫–æ–º–µ–Ω–¥—É—î–º–æ LXC –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä** –∑–∞–º—ñ—Å—Ç—å –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ –Ω–∞ Proxmox —Ö–æ—Å—Ç —á–µ—Ä–µ–∑ –∫—Ä–∞—â—É —ñ–∑–æ–ª—è—Ü—ñ—é, –±–µ–∑–ø–µ–∫—É —Ç–∞ –ø—Ä–æ—Å—Ç–æ—Ç—É —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è.

### –ß–æ–º—É LXC?
- ‚úÖ –Ü–∑–æ–ª—è—Ü—ñ—è –≤—ñ–¥ —Ö–æ—Å—Ç-—Å–∏—Å—Ç–µ–º–∏
- ‚úÖ –õ–µ–≥–∫–µ –±–µ–∫–∞–ø—É–≤–∞–Ω–Ω—è (–æ–¥–∏–Ω –∫–ª—ñ–∫)
- ‚úÖ –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–µ —Å–ø–æ–∂–∏–≤–∞–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤
- ‚úÖ –õ–µ–≥–∫–æ –≤–∏–¥–∞–ª–∏—Ç–∏ –±–µ–∑ –∑–∞–ª–∏—à–∫—ñ–≤
- ‚úÖ –ù–µ –∑–∞—Ö–∞—Ä–∞—â—É—î Proxmox —Ö–æ—Å—Ç –ø–∞–∫–µ—Ç–∞–º–∏

---

## üêß –í–∞—Ä—ñ–∞–Ω—Ç 1: –†–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –≤ LXC –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ (–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)

### –ö—Ä–æ–∫ 1: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è LXC –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

> [!TIP]
> **–î–≤–∞ —Å–ø–æ—Å–æ–±–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è:** –û–±–µ—Ä—ñ—Ç—å –∑—Ä—É—á–Ω–∏–π –¥–ª—è –≤–∞—Å –≤–∞—Ä—ñ–∞–Ω—Ç - –≥—Ä–∞—Ñ—ñ—á–Ω–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–ø—Ä–æ—Å—Ç—ñ—à–µ) –∞–±–æ –∫–æ–º–∞–Ω–¥–Ω–∏–π —Ä—è–¥–æ–∫ (—à–≤–∏–¥—à–µ –¥–ª—è –¥–æ—Å–≤—ñ–¥—á–µ–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤).

---

#### –í–∞—Ä—ñ–∞–Ω—Ç A: –ß–µ—Ä–µ–∑ Web UI (–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ –¥–ª—è –Ω–æ–≤–∞—á–∫—ñ–≤)

1. **–í—ñ–¥–∫—Ä–∏–π—Ç–µ Proxmox Web UI**
2. **–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "Create CT"** (Create Container)
3. **–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:**

   **General:**
   - Node: –æ–±–µ—Ä—ñ—Ç—å –≤–∞—à Proxmox node
   - CT ID: –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, 100) –∞–±–æ –≤–∫–∞–∂—ñ—Ç—å –≤—Ä—É—á–Ω—É
   - Hostname: `nkon-monitor`
   - Password: –≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å root –ø–∞—Ä–æ–ª—å
   - ‚òë Unprivileged container (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)

   **Template:**
   - Storage: `local`
   - Template: `ubuntu-22.04-standard` –∞–±–æ `debian-12-standard`
   
   > [!NOTE]
   > –Ø–∫—â–æ template –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–∏–π, —Å–ø–æ—á–∞—Ç–∫—É –∑–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ –π–æ–≥–æ:
   > Storage ‚Üí CT Templates ‚Üí Templates ‚Üí Download

   **Resources:**
   - Memory (RAM): `512 MB` (–¥–æ—Å—Ç–∞—Ç–Ω—å–æ)
   - Swap: `512 MB`
   - CPU cores: `1`

   **Root Disk:**
   - Storage: `local-lvm` (–∞–±–æ —ñ–Ω—à–∏–π –¥–æ—Å—Ç—É–ø–Ω–∏–π)
   - Disk size: `4 GB` (–±—ñ–ª—å—à–µ –Ω—ñ–∂ –¥–æ—Å—Ç–∞—Ç–Ω—å–æ)

   **Network:**
   - Bridge: `vmbr0`
   
   > [!TIP]
   > **–†–µ–∫–æ–º–µ–Ω–¥—É—î–º–æ —Å—Ç–∞—Ç–∏—á–Ω–∏–π IP** –¥–ª—è —Å—Ç–∞–±—ñ–ª—å–Ω–æ—Å—Ç—ñ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è
   
   **–í–∞—Ä—ñ–∞–Ω—Ç 1: –°—Ç–∞—Ç–∏—á–Ω–∏–π IP (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ –¥–ª—è —Å–µ—Ä–≤–µ—Ä—ñ–≤)**
   - IPv4: Static
   - IP: `192.168.1.100/24` (–∑–∞–º—ñ–Ω—ñ—Ç—å –Ω–∞ –≤–∞—à—É –º–µ—Ä–µ–∂—É)
   - Gateway: `192.168.1.1` (–∑–∞–º—ñ–Ω—ñ—Ç—å –Ω–∞ –≤–∞—à —à–ª—é–∑)
   
   **–í–∞—Ä—ñ–∞–Ω—Ç 2: DHCP (–ø—Ä–æ—Å—Ç—ñ—à–µ –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è)**
   - IPv4: DHCP ‚òë
   
   **IPv6:** DHCP (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)

   **DNS:**
   - Use host settings ‚òë
   - –ê–±–æ –≤–∫–∞–∂—ñ—Ç—å –≤—Ä—É—á–Ω—É: `8.8.8.8`, `8.8.4.4`

4. **–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "Finish"**
5. **Start** –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (–ø—Ä–∞–≤–∏–π –∫–ª—ñ–∫ ‚Üí Start)
6. **–ù–∞–ª–∞—à—Ç—É–π—Ç–µ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫:** Options ‚Üí Start at boot ‚òë

---

#### –í–∞—Ä—ñ–∞–Ω—Ç B: –ß–µ—Ä–µ–∑ CLI (–®–≤–∏–¥–∫–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è)

> [!IMPORTANT]
> **–ü–µ—Ä–µ–¥—É–º–æ–≤–∏:** Template –ø–æ–≤–∏–Ω–µ–Ω –±—É—Ç–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–∏–π. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ: `pveam available` –∞–±–æ –∑–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ: `pveam download local ubuntu-22.04-standard_22.04-1_amd64.tar.zst`

**–°–∫—Ä–∏–ø—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è:**

```bash
#!/bin/bash
# –°–∫—Ä–∏–ø—Ç —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è LXC –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –¥–ª—è NKON Monitor
# –í–∏–∫–æ–Ω—É–≤–∞—Ç–∏ –Ω–∞ Proxmox —Ö–æ—Å—Ç—ñ (–Ω–µ –≤ LXC!)

# –ó–º—ñ–Ω–Ω—ñ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
CTID=100                    # ID –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (–∑–º—ñ–Ω—ñ—Ç—å —è–∫—â–æ –≤–∂–µ –∑–∞–π–Ω—è—Ç–æ)
HOSTNAME="nkon-monitor"     # –≤–∫–∞–∂—ñ—Ç—å hostname
PASSWORD="YourSecurePassword123"  # –ó–ú–Ü–ù–Ü–¢–¨ –Ω–∞ –≤–ª–∞—Å–Ω–∏–π –ø–∞—Ä–æ–ª—å!
TEMPLATE="local:vztmpl/ubuntu-22.04-standard_22.04-1_amd64.tar.zst"
STORAGE="local-lvm"         # –≤–∫–∞–∂—ñ—Ç—å —Å—Ö–æ–≤–∏—â–µ —Ä–æ–∑–º—ñ—â–µ–Ω–Ω—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
RAM=512                     # MB
SWAP=512                    # MB
DISK=4                      # GB
CORES=1                     # –∫—ñ–ª—å–∫—ñ—Å—Ç—å —è–¥–µ—Ä
BRIDGE="vmbr0"              # –≤–∫–∞–∂—ñ—Ç—å –º–µ—Ä–µ–∂–µ–≤–∏–π –º—ñ—Å—Ç 

# –ú–µ—Ä–µ–∂–∞ - –æ–±–µ—Ä—ñ—Ç—å –æ–¥–∏–Ω –∑ –≤–∞—Ä—ñ–∞–Ω—Ç—ñ–≤:
# –í–∞—Ä—ñ–∞–Ω—Ç 1: DHCP (–¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è)
NET_CONFIG="ip=dhcp"

# –í–∞—Ä—ñ–∞–Ω—Ç 2: –°—Ç–∞—Ç–∏—á–Ω–∏–π IP (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ –¥–ª—è production)
# –†–æ–∑–∫–æ–º–µ–Ω—Ç—É–π—Ç–µ —Ç–∞ –Ω–∞–ª–∞—à—Ç—É–π—Ç–µ:
# NET_CONFIG="ip=192.168.1.100/24,gw=192.168.1.1"

# –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
pct create $CTID $TEMPLATE \
  --hostname $HOSTNAME \
  --password $PASSWORD \
  --memory $RAM \
  --swap $SWAP \
  --cores $CORES \
  --rootfs $STORAGE:$DISK \
  --net0 name=eth0,bridge=$BRIDGE,$NET_CONFIG \
  --nameserver 8.8.8.8 \
  --nameserver 8.8.4.4 \
  --unprivileged 1 \
  --onboot 1 \
  --features nesting=1 \
  --start 1

echo "‚úÖ LXC –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å—Ç–≤–æ—Ä–µ–Ω–æ —ñ –∑–∞–ø—É—â–µ–Ω–æ!"
echo "üìã ID: $CTID"
echo "üîê Password: $PASSWORD"
echo "üåê Hostname: $HOSTNAME"
echo ""
echo "–ü—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—è: pct enter $CTID"
```

**–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Å–∫—Ä–∏–ø—Ç–∞:**

1. **–ó–±–µ—Ä–µ–∂—ñ—Ç—å —Å–∫—Ä–∏–ø—Ç –Ω–∞ Proxmox —Ö–æ—Å—Ç—ñ:**
   ```bash
   # SSH –¥–æ Proxmox
   nano /root/create_nkon_lxc.sh
   # –í—Å—Ç–∞–≤—Ç–µ —Å–∫—Ä–∏–ø—Ç –≤–∏—â–µ
   # Ctrl+O, Enter, Ctrl+X
   ```

2. **–ù–∞–ª–∞—à—Ç—É–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏:**
   ```bash
   # –í—ñ–¥—Ä–µ–¥–∞–≥—É–π—Ç–µ –∑–º—ñ–Ω–Ω—ñ —É —Å–∫—Ä–∏–ø—Ç—ñ:
   # - CTID (—è–∫—â–æ 100 –≤–∂–µ –∑–∞–π–Ω—è—Ç–æ)
   # - PASSWORD (–æ–±–æ–≤'—è–∑–∫–æ–≤–æ –∑–º—ñ–Ω—ñ—Ç—å!)
   # - TEMPLATE (—è–∫—â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ —ñ–Ω—à–∏–π)
   ```

3. **–ó—Ä–æ–±—ñ—Ç—å —Å–∫—Ä–∏–ø—Ç –≤–∏–∫–æ–Ω—É–≤–∞–Ω–∏–º:**
   ```bash
   chmod +x /root/create_nkon_lxc.sh
   ```

4. **–ó–∞–ø—É—Å—Ç—ñ—Ç—å:**
   ```bash
   /root/create_nkon_lxc.sh
   ```

**–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è:**
```bash
# –°–ø–∏—Å–æ–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤
pct list

# –°—Ç–∞—Ç—É—Å
pct status 100

# –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è
pct enter 100
```

---

#### –†—É—á–Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —á–µ—Ä–µ–∑ CLI (–¥–ª—è –¥–æ—Å–≤—ñ–¥—á–µ–Ω–∏—Ö)

–Ø–∫—â–æ —Ö–æ—á–µ—Ç–µ –±—ñ–ª—å—à–µ –∫–æ–Ω—Ç—Ä–æ–ª—é:

```bash
# 1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –¥–æ—Å—Ç—É–ø–Ω—ñ templates
pveam available | grep ubuntu

# 2. –ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ template (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ)
pveam download local ubuntu-22.04-standard_22.04-1_amd64.tar.zst

# 3. –ó–Ω–∞–π–¥—ñ—Ç—å –≤—ñ–ª—å–Ω–∏–π CTID
pvesh get /cluster/resources --type vm | grep -o 'vmid":[0-9]*'

# 4. –°—Ç–≤–æ—Ä—ñ—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
pct create 100 local:vztmpl/ubuntu-22.04-standard_22.04-1_amd64.tar.zst \
  --hostname nkon-monitor \
  --password YourPassword \
  --memory 512 \
  --swap 512 \
  --cores 1 \
  --rootfs local-lvm:4 \
  --net0 name=eth0,bridge=vmbr0,ip=dhcp \
  --unprivileged 1

# 5. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
pct set 100 -onboot 1

# 6. –ó–∞–ø—É—Å—Ç—ñ—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
pct start 100

# 7. –ü—ñ–¥–∫–ª—é—á—ñ—Ç—å—Å—è
pct enter 100
```


### –ö—Ä–æ–∫ 2: –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

```bash
# –ó Proxmox Shell –∞–±–æ SSH
pct enter <CTID>  # –Ω–∞–ø—Ä–∏–∫–ª–∞–¥: pct enter 100

# –ê–±–æ —á–µ—Ä–µ–∑ Web UI: Console ‚Üí Shell
```

### –ö—Ä–æ–∫ 3: –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π

```bash
# –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å–∏—Å—Ç–µ–º–∏
apt update && apt upgrade -y

# –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è Python —Ç–∞ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤
apt install -y python3 python3-pip python3-venv git

# –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è Chrome –¥–ª—è Selenium (headless)
wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
apt install -y ./google-chrome-stable_current_amd64.deb
rm google-chrome-stable_current_amd64.deb

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞
python3 --version
google-chrome --version
```

### –ö—Ä–æ–∫ 4: –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø—Ä–æ—î–∫—Ç—É

**–í–∞—Ä—ñ–∞–Ω—Ç –ê: –Ø–∫—â–æ —É –≤–∞—Å —î Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π**
```bash
cd /root
git clone https://github.com/borya-mbi/nkon-informer.git nkon-informer
cd nkon-informer
```

**–í–∞—Ä—ñ–∞–Ω—Ç –ë: –†—É—á–Ω–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è —á–µ—Ä–µ–∑ SCP**
```bash
# –ù–∞ –≤–∞—à–æ–º—É Windows –∫–æ–º–ø'—é—Ç–µ—Ä—ñ (–≤ PowerShell):
# scp -r h:\1c8\Work\MBI\Education\AG\nkon-informer root@<PROXMOX_IP>:/root/

# –ü–æ—Ç—ñ–º –≤ LXC:
cd /root/nkon-informer
```

**–í–∞—Ä—ñ–∞–Ω—Ç –í: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤—Ä—É—á–Ω—É –≤ LXC**
```bash
mkdir -p /root/nkon-informer
cd /root/nkon-informer

# –ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ —Ñ–∞–π–ª–∏ —á–µ—Ä–µ–∑ Web UI Console (copy-paste) –∞–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ nano/vim
```

### –ö—Ä–æ–∫ 5: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Python —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

```bash
cd /root/nkon-informer

# –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
python3 -m venv venv

# –ê–∫—Ç–∏–≤–∞—Ü—ñ—è
source venv/bin/activate

# –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
pip install -r requirements.txt
```

### –ö—Ä–æ–∫ 6: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–æ–µ–∫—Ç—É

–ú–∏ –±—É–¥–µ–º–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Ñ–∞–π–ª `.env` –¥–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å.

```bash
# –°–∫–æ–ø—ñ—é–π—Ç–µ –ø—Ä–∏–∫–ª–∞–¥ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å
cp .env.example .env

# –í—ñ–¥—Ä–µ–¥–∞–≥—É–π—Ç–µ —Ñ–∞–π–ª
nano .env
```

–í—Å—Ç–∞–≤—Ç–µ –≤–∞—à—ñ –¥–∞–Ω—ñ (–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —Å—Ç—Ä—ñ–ª–∫–∏ –¥–ª—è –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó):

```ini
TELEGRAM_BOT_TOKEN=123456789:ABCdefGHIjklMNOpqrsTUVwxyz
TELEGRAM_CHAT_IDS=123456789,987654321
MIN_CAPACITY_AH=200
PRICE_ALERT_THRESHOLD=5
```

> [!TIP]
> –©–æ–± –∑–±–µ—Ä–µ–≥—Ç–∏ —Ñ–∞–π–ª –≤ nano: –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å `Ctrl+O`, `Enter`, –ø–æ—Ç—ñ–º `Ctrl+X`.

### –ö—Ä–æ–∫ 7: –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

```bash
# –ê–∫—Ç–∏–≤—É–π—Ç–µ venv —è–∫—â–æ —â–µ –Ω–µ –∞–∫—Ç–∏–≤–æ–≤–∞–Ω–µ
source venv/bin/activate

# –¢–µ—Å—Ç–æ–≤–∏–π –∑–∞–ø—É—Å–∫ –ë–ï–ó Telegram
python nkon_monitor.py --dry-run

# –†–µ–∞–ª—å–Ω–∏–π –∑–∞–ø—É—Å–∫ –ó Telegram
python nkon_monitor.py
```

–Ø–∫—â–æ –≤—Å–µ –ø—Ä–∞—Ü—é—î - –≤–∏ –æ—Ç—Ä–∏–º–∞—î—Ç–µ Telegram –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è! ‚úÖ

### –ö—Ä–æ–∫ 8: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫—É —á–µ—Ä–µ–∑ cron

```bash
# –í—ñ–¥–∫—Ä–∏–π—Ç–µ crontab
crontab -e

# –í–∏–±–µ—Ä—ñ—Ç—å —Ä–µ–¥–∞–∫—Ç–æ—Ä (–∑–∞–∑–≤–∏—á–∞–π nano: –æ–ø—Ü—ñ—è 1)
```

–î–æ–¥–∞–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω–∏–π —Ä—è–¥–æ–∫ (–∑–∞–ø—É—Å–∫ —â–æ–¥–Ω—è –æ 9:00):

```cron
0 9 * * * cd /root/nkon-informer && /root/nkon-informer/venv/bin/python /root/nkon-informer/nkon_monitor.py >> /root/nkon-informer/nkon_cron.log 2>&1
```

**–Ü–Ω—à—ñ —Ä–æ–∑–∫–ª–∞–¥–∏:**
```cron
# –ö–æ–∂–Ω—ñ 6 –≥–æ–¥–∏–Ω
0 */6 * * * cd /root/nkon-informer && /root/nkon-informer/venv/bin/python /root/nkon-informer/nkon_monitor.py >> /root/nkon-informer/nkon_cron.log 2>&1

# –¢—Ä–∏—á—ñ –Ω–∞ –¥–µ–Ω—å (9:00, 15:00, 21:00)
0 9,15,21 * * * cd /root/nkon-informer && /root/nkon-informer/venv/bin/python /root/nkon-informer/nkon_monitor.py >> /root/nkon-informer/nkon_cron.log 2>&1

# –ö–æ–∂–Ω—É –≥–æ–¥–∏–Ω—É
0 * * * * cd /root/nkon-informer && /root/nkon-informer/venv/bin/python /root/nkon-informer/nkon_monitor.py >> /root/nkon-informer/nkon_cron.log 2>&1
```

–ó–±–µ—Ä–µ–∂—ñ—Ç—å: `Ctrl+O`, `Enter`, `Ctrl+X`

**–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ cron:**
```bash
# –°–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω–∏—Ö –∑–∞–≤–¥–∞–Ω—å
crontab -l

# –ü–µ—Ä–µ–≥–ª—è–¥ –ª–æ–≥—ñ–≤
tail -f /root/nkon-informer/nkon_cron.log
```

### –ö—Ä–æ–∫ 9: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫—É LXC (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)

–©–æ–± –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–ø—É—Å–∫–∞–≤—Å—è –ø—ñ—Å–ª—è –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è Proxmox:

```bash
# –ù–∞ Proxmox —Ö–æ—Å—Ç—ñ (–Ω–µ –≤ LXC!)
pct set <CTID> -onboot 1  # –Ω–∞–ø—Ä–∏–∫–ª–∞–¥: pct set 100 -onboot 1
```

---

## üñ•Ô∏è –í–∞—Ä—ñ–∞–Ω—Ç 2: –ë–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ –Ω–∞ Proxmox —Ö–æ—Å—Ç—ñ (–ù–ï —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)

> [!WARNING]
> –¶–µ–π –≤–∞—Ä—ñ–∞–Ω—Ç –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —Ç—ñ–ª—å–∫–∏ —è–∫—â–æ —É –≤–∞—Å –Ω–µ–º–∞—î –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ —Å—Ç–≤–æ—Ä–∏—Ç–∏ LXC –∞–±–æ —É –≤–∞—Å –æ—Å–æ–±–ª–∏–≤—ñ –≤–∏–º–æ–≥–∏.

–ö—Ä–æ–∫–∏ –∞–Ω–∞–ª–æ–≥—ñ—á–Ω—ñ –¥–æ LXC –≤–∞—Ä—ñ–∞–Ω—Ç—É, –∞–ª–µ –≤–∏–∫–æ–Ω—É—é—Ç—å—Å—è –≤ Proxmox Shell:

1. SSH –¥–æ Proxmox —Ö–æ—Å—Ç–∞
2. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ (—è–∫ —É –ö—Ä–æ—Ü—ñ 3)
3. –°—Ç–≤–æ—Ä—ñ—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é `/opt/nkon-informer`
4. –°–∫–æ–ø—ñ—é–π—Ç–µ —Ñ–∞–π–ª–∏ –ø—Ä–æ—î–∫—Ç—É
5. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ venv —Ç–∞ cron

```bash
# –ü—Ä–∏–∫–ª–∞–¥
cd /opt
mkdir nkon-informer
cd nkon-informer
# ... —Ä–µ—à—Ç–∞ –∫—Ä–æ–∫—ñ–≤ —è–∫ —É LXC
```

---

## üîß –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º

### –û—Å–Ω–æ–≤–Ω—ñ –∫–æ–º–∞–Ω–¥–∏ Proxmox:

```bash
# –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
pct start <CTID>

# –ó—É–ø–∏–Ω–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
pct stop <CTID>

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
pct restart <CTID>

# –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –∫–æ–Ω—Å–æ–ª—ñ
pct enter <CTID>

# –ü–µ—Ä–µ–≥–ª—è–¥ —Å—Ç–∞—Ç—É—Å—É
pct status <CTID>

# –í–∏–¥–∞–ª–µ–Ω–Ω—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
pct destroy <CTID>
```

### –ë–µ–∫–∞–ø—É–≤–∞–Ω–Ω—è:

**–ß–µ—Ä–µ–∑ Web UI:**
```
Datacenter ‚Üí Backup ‚Üí Create Backup
- Select VM/CT: –≤–∞—à NKON container
- Mode: Snapshot –∞–±–æ Stop
- Compression: ZSTD (—à–≤–∏–¥–∫–æ + –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ)
```

**–ß–µ—Ä–µ–∑ CLI:**
```bash
vzdump <CTID> --mode snapshot --compress zstd
```

### –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å–∫—Ä–∏–ø—Ç–∞:

> [!IMPORTANT]
> **–°–ø–æ—Å—ñ–± –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ —Ç–æ–≥–æ, —è–∫ –≤–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª—é–≤–∞–ª–∏ –ø—Ä–æ—î–∫—Ç —Å–ø–æ—á–∞—Ç–∫—É!**

#### –í–∞—Ä—ñ–∞–Ω—Ç A: –Ø–∫—â–æ –≤—Å—Ç–∞–Ω–æ–≤–ª—é–≤–∞–ª–∏ —á–µ—Ä–µ–∑ Git Clone

```bash
# –ü—ñ–¥–∫–ª—é—á—ñ—Ç—å—Å—è –¥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
pct enter <CTID>
cd /root/nkon-informer
source venv/bin/activate

# –û—Ç—Ä–∏–º–∞–π—Ç–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é
git pull

# –û–Ω–æ–≤—ñ—Ç—å Python –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
pip install -r requirements.txt

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞
python nkon_monitor.py --dry-run
```

#### –í–∞—Ä—ñ–∞–Ω—Ç B: –Ø–∫—â–æ –≤—Å—Ç–∞–Ω–æ–≤–ª—é–≤–∞–ª–∏ —á–µ—Ä–µ–∑ SCP

```bash
# 1. –ù–∞ –≤–∞—à–æ–º—É Windows –∫–æ–º–ø'—é—Ç–µ—Ä—ñ (PowerShell):
# –°–∫–æ–ø—ñ—é–π—Ç–µ –æ–Ω–æ–≤–ª–µ–Ω—ñ —Ñ–∞–π–ª–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
scp -r h:\1c8\Work\MBI\Education\AG\nkon-informer\*.py root@<LXC_IP>:/root/nkon-informer/
scp h:\1c8\Work\MBI\Education\AG\nkon-informer\requirements.txt root@<LXC_IP>:/root/nkon-informer/

# 2. –í LXC –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ:
pct enter <CTID>
cd /root/nkon-informer
source venv/bin/activate

# –û–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
pip install -r requirements.txt

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞
python nkon_monitor.py --dry-run
```

#### –í–∞—Ä—ñ–∞–Ω—Ç C: –†—É—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤

```bash
# 1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ Proxmox Web UI ‚Üí Console –≤–∞—à–æ–≥–æ LXC
# 2. –í—ñ–¥—Ä–µ–¥–∞–≥—É–π—Ç–µ —Ñ–∞–π–ª–∏ —á–µ—Ä–µ–∑ nano/vim:
nano /root/nkon-informer/nkon_monitor.py

# –ê–±–æ —Å–∫–æ–ø—ñ—é–π—Ç–µ –≤–º—ñ—Å—Ç —á–µ—Ä–µ–∑ copy-paste –≤ –∫–æ–Ω—Å–æ–ª—ñ

# 3. –ê–∫—Ç–∏–≤—É–π—Ç–µ venv
cd /root/nkon-informer
source venv/bin/activate

# 4. –û–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
pip install -r requirements.txt

# 5. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞
python nkon_monitor.py --dry-run
```

**–ü—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è –∑–∞ —Ä–æ–∑–∫–ª–∞–¥–æ–º cron.**

---

## üìä –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Ç–∞ –ª–æ–≥–∏

### –ü–µ—Ä–µ–≥–ª—è–¥ –ª–æ–≥—ñ–≤:

```bash
# –í LXC –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ
cd /root/nkon-informer

# –û—Å–Ω–æ–≤–Ω–∏–π –ª–æ–≥ —Å–∫—Ä–∏–ø—Ç–∞
tail -f nkon_monitor.log

# Cron –ª–æ–≥
tail -f nkon_cron.log
```

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–æ–±–æ—Ç–∏ cron:

```bash
# –ü–µ—Ä–µ–≥–ª—è–¥ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –ª–æ–≥—É cron
grep CRON /var/log/syslog | tail -20

# –†—É—á–Ω–∏–π –∑–∞–ø—É—Å–∫ –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
cd /root/nkon-informer
source venv/bin/activate
python nkon_monitor.py
```

---

## üõ°Ô∏è –ë–µ–∑–ø–µ–∫–∞

1. **–û–±–º–µ–∂—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø—É –¥–æ config.json:**
   ```bash
   chmod 600 config.json
   ```

2. **–ù–µ –ø—É–±–ª—ñ–∫—É–π—Ç–µ config.json –≤ Git:**
   ```bash
   # –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ .gitignore
   cat .gitignore | grep config.json
   ```

3. **–†–µ–≥—É–ª—è—Ä–Ω–æ –æ–Ω–æ–≤–ª—é–π—Ç–µ —Å–∏—Å—Ç–µ–º—É:**
   ```bash
   apt update && apt upgrade -y
   ```

4. **–ù–∞–ª–∞—à—Ç—É–π—Ç–µ firewall (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ):**
   ```bash
   # LXC –ø–æ—Ç—Ä–µ–±—É—î –¥–æ—Å—Ç—É–ø—É —Ç—ñ–ª—å–∫–∏ –¥–æ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç—É (–≤–∏—Ö—ñ–¥–Ω–∏–π —Ç—Ä–∞—Ñ—ñ–∫)
   # –í—Ö—ñ–¥–Ω–∏–π —Ç—Ä–∞—Ñ—ñ–∫ –Ω–µ –ø–æ—Ç—Ä—ñ–±–µ–Ω
   ```

---

## ‚ùì Troubleshooting

### Chrome –Ω–µ –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ

```bash
# –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –¥–æ–¥–∞—Ç–∫–æ–≤—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
apt install -y fonts-liberation libasound2 libatk-bridge2.0-0 libatk1.0-0 \
  libatspi2.0-0 libcups2 libdbus-1-3 libdrm2 libgbm1 libgtk-3-0 libnspr4 \
  libnss3 libwayland-client0 libxcomposite1 libxdamage1 libxfixes3 \
  libxkbcommon0 libxrandr2 xdg-utils
```

### Cron –Ω–µ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å—Ç–∞—Ç—É—Å cron
systemctl status cron

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å cron
systemctl restart cron

# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å crontab
crontab -l
```

### –ù–µ–º–∞—î —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç—É –≤ LXC

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –º–µ—Ä–µ–∂—É
ping google.com

# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ DNS
cat /etc/resolv.conf

# –Ø–∫—â–æ DNS –Ω–µ –ø—Ä–∞—Ü—é—î, –¥–æ–¥–∞–π—Ç–µ Google DNS
echo "nameserver 8.8.8.8" >> /etc/resolv.conf
```

---

## üìà –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω—ñ —Ä–µ—Å—É—Ä—Å–∏ –¥–ª—è LXC

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ú—ñ–Ω—ñ–º—É–º | –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ |
|----------|---------|---------------|
| RAM      | 256 MB  | 512 MB        |
| CPU      | 1 core  | 1 core        |
| Disk     | 2 GB    | 4 GB          |
| Network  | 100 Mbps| 1 Gbps        |

---

**–ì–æ—Ç–æ–≤–æ! –í–∞—à NKON Monitor –ø—Ä–∞—Ü—é—î –≤ —ñ–∑–æ–ª—å–æ–≤–∞–Ω–æ–º—É LXC –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ! üéâ**
